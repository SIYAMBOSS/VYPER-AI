<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VYPER AI | Siyam OS V4</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Noto+Sans+Bengali:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #9147ff; --bg: #050505; --card: #121214; --text: #ffffff; --border: rgba(255,255,255,0.08); }
        .light-mode { --bg: #f5f7fb; --card: #ffffff; --text: #1a1a1a; --border: rgba(0,0,0,0.1); }
        
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Outfit', 'Noto Sans Bengali', sans-serif; transition: 0.3s; }
        body { background: var(--bg); color: var(--text); display: flex; height: 100dvh; overflow: hidden; }

        /* Sidebar */
        #sidebar { width: 300px; background: var(--card); height: 100%; position: fixed; left: -300px; z-index: 2000; padding: 30px; border-right: 1px solid var(--border); box-shadow: 10px 0 30px rgba(0,0,0,0.5); }
        #sidebar.active { left: 0; }
        .menu-btn { position: fixed; top: 15px; left: 15px; background: var(--card); padding: 10px 15px; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; z-index: 1001; }

        /* Main View */
        #main { flex: 1; display: flex; flex-direction: column; width: 100%; padding-top: 70px; }
        #chat-window { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; scrollbar-width: none; }
        .bubble { max-width: 85%; padding: 15px 20px; border-radius: 20px; font-size: 15px; line-height: 1.6; animation: slideUp 0.3s ease; }
        .ai { align-self: flex-start; background: var(--card); border: 1px solid var(--border); border-bottom-left-radius: 4px; }
        .user { align-self: flex-end; background: var(--primary); color: white; border-bottom-right-radius: 4px; }

        /* Controls */
        .top-tools { position: fixed; top: 15px; right: 15px; display: flex; gap: 10px; z-index: 1001; }
        .tool { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: 10px; border-radius: 12px; cursor: pointer; font-size: 12px; }

        /* Action Buttons */
        .sidebar-btn { width: 100%; padding: 12px; border: none; border-radius: 10px; cursor: pointer; margin-bottom: 10px; font-weight: 600; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-danger { background: #ff4757; color: white; margin-top: auto; }

        .input-deck { padding: 20px; }
        .input-wrap { max-width: 850px; margin: 0 auto; background: var(--card); border-radius: 18px; padding: 10px 20px; display: flex; align-items: center; border: 1px solid var(--border); }
        textarea { flex: 1; background: transparent; border: none; color: var(--text); font-size: 16px; outline: none; resize: none; max-height: 120px; }
        .send-icon { color: var(--primary); font-size: 30px; cursor: pointer; margin-left: 15px; }

        .history-item { font-size: 13px; color: #888; padding: 10px; border-bottom: 1px solid var(--border); cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } }
    </style>
</head>
<body class="dark-mode">

<div class="menu-btn" onclick="document.getElementById('sidebar').classList.toggle('active')">‚ò∞</div>

<div class="top-tools">
    <div class="tool" onclick="document.body.classList.toggle('light-mode')">üåì</div>
    <div class="tool" id="key-info">API: 1/12</div>
</div>

<div id="sidebar">
    <button class="sidebar-btn btn-primary" onclick="location.reload()">+ NEW SESSION</button>
    <div style="margin-top:20px; font-size:12px; color:var(--primary); letter-spacing:1px; margin-bottom: 10px;">RECENT MEMORY</div>
    <div id="history-box" style="flex: 1; overflow-y: auto;"></div>
    <button class="sidebar-btn btn-danger" onclick="clearMemory()">üóë CLEAR HISTORY</button>
</div>

<div id="main">
    <div id="chat-window">
        <div class="bubble ai">‡¶∏‡¶ø‡¶Ø‡¶º‡¶æ‡¶Æ, **VYPER V4** ‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡•§ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶Æ‡ßÅ‡¶õ‡¶æ‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶è‡¶ñ‡¶® ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞‡ßá ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§</div>
    </div>

    <div class="input-deck">
        <div class="input-wrap">
            <textarea id="uInput" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." rows="1" oninput="this.style.height='';this.style.height=this.scrollHeight+'px'"></textarea>
            <div class="send-icon" onclick="startChat()">‚û§</div>
        </div>
    </div>
</div>

<script>
    const keys = [
        "AIzaSyCaPb3B41dnv8zfTvq5B0ESMnHDbyozpag", "AIzaSyBx9AL4zJM4HhygPESUWhYP1qavkq8NZPU",
        "AIzaSyDHuEqY86zRPVA_cYM0GUxV7KNIwznvnTc", "AIzaSyBy9RtIyLJdogkg55fdgDNi7DMx6zmKruI",
        "AIzaSyCXvzgZ21NGPD5pcsrWBMMYHI_tTZM-zPU", "AIzaSyCiES0Mn-OzRqGt18-3e_IdnPQf0pJikWg",
        "AIzaSyCXWtEGRPNrUQIaZVNRLaCffpUMc3fmKJk", "AIzaSyDs7rT6ftU_Lgo8bmETapwb4TUxKaCjVrQ",
        "AIzaSyCwQPheQB7qQVD4GN8AXk1-_fMYplP8nm0", "AIzaSyAkzQtggP6Hm6XB0tLlCZIy_nTVjsyde3A",
        "AIzaSyBlxEQjZSUO_KLx5BHbAOA0fNGK2jsmpwM", "AIzaSyCO5wWJM5TLCt9EJqvQVOPAHgQcfEQBG-c"
    ];
    let activeIdx = 0;

    // Load History on Start
    window.onload = () => {
        const saved = JSON.parse(localStorage.getItem('vyper_history') || '[]');
        saved.forEach(msg => updateSidebar(msg));
    };

    function clearMemory() {
        if(confirm("‡¶∏‡¶¨ ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá‡¶®?")) {
            localStorage.removeItem('vyper_history');
            document.getElementById('history-box').innerHTML = '';
        }
    }

    function updateSidebar(text) {
        const box = document.getElementById('history-box');
        const div = document.createElement('div');
        div.className = 'history-item';
        div.innerText = text;
        box.prepend(div);
    }

    async function startChat() {
        const i = document.getElementById('uInput');
        const w = document.getElementById('chat-window');
        const v = i.value.trim();
        if(!v) return;

        w.innerHTML += `<div class="bubble user">${v}</div>`;
        
        // Save to LocalStorage
        let history = JSON.parse(localStorage.getItem('vyper_history') || '[]');
        history.push(v);
        localStorage.setItem('vyper_history', JSON.stringify(history.slice(-20)));
        updateSidebar(v);

        i.value = '';
        i.style.height = 'auto';
        w.scrollTop = w.scrollHeight;
        await callGemini(v, w);
    }

    async function callGemini(p, w) {
        document.getElementById('key-info').innerText = `API: ${activeIdx + 1}/12`;
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${keys[activeIdx]}`;
        
        try {
            const r = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ contents: [{ parts: [{ text: p }] }] })
            });
            if(!r.ok) throw new Error();
            const d = await r.json();
            const ans = d.candidates[0].content.parts[0].text;
            w.innerHTML += `<div class="bubble ai">${ans}</div>`;
            w.scrollTop = w.scrollHeight;
        } catch(e) {
            if(activeIdx < keys.length - 1) { activeIdx++; callGemini(p, w); }
            else { w.innerHTML += `<div class="bubble ai" style="color:red">All Keys Dead.</div>`; }
        }
    }
</script>
</body>
</html>
